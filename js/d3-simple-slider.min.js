!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-array"),require("d3-axis"),require("d3-dispatch"),require("d3-drag"),require("d3-ease"),require("d3-scale"),require("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-axis","d3-dispatch","d3-drag","d3-ease","d3-scale","d3-selection"],e):e(t.d3=t.d3||{},t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3)}(this,function(t,B,r,O,R,_,H,P){"use strict";var Q=200,C=8,E=1,G=2,I=3,J=4;function K(t){return"translate("+t+",0)"}function N(t){return"translate(0,"+t+")"}function e(a,i){i=void 0!==i?i:null;var l=0,e=0,s=[0,10],c=100,o=100,u=!0,d="M-5.5,-5.5v10l6,5.5l6,-5.5v-10z",f=null,m=null,p=null,g=null,h=null,v=null,x=O.dispatch("onchange","start","end","drag"),k=null,y=null,b=a===E||a===J?-1:1,w=a===J||a===G?"y":"x",q=a===J||a===G?"x":"y",A=a===E||a===I?K:N,z=a===E||a===I?N:K,F=null;switch(a){case E:F=r.axisTop;break;case G:F=r.axisRight;break;case I:F=r.axisBottom;break;case J:F=r.axisLeft}var L=null,V=null;function n(t){k=t.selection?t.selection():t,i=i?(s=[B.min(i.domain()),B.max(i.domain())],i.clamp(!0)):(i=s[0]instanceof Date?H.scaleTime():H.scaleLinear()).domain(s).range([0,a===E||a===I?c:o]).clamp(!0),y=H.scaleLinear().range(i.range()).domain(i.range()).clamp(!0),l=H.scaleLinear().range(s).domain(s).clamp(!0)(l),g=g||i.tickFormat(),v=v||g||i.tickFormat(),k.selectAll(".axis").data([null]).enter().append("g").attr("transform",z(7*b)).attr("class","axis");var r=k.selectAll(".slider").data([null]),e=r.enter().append("g").attr("class","slider").attr("cursor",a===E||a===I?"ew-resize":"ns-resize").call(R.drag().on("start",function(){P.select(this).classed("active",!0);var t=y(a===I||a===E?P.event.x:P.event.y),e=D(i.invert(t));j(e),x.call("start",r,e),T(e,!0)}).on("drag",function(){var t=y(a===I||a===E?P.event.x:P.event.y),e=D(i.invert(t));j(e),x.call("drag",r,e),T(e,!0)}).on("end",function(){P.select(this).classed("active",!1);var t=y(a===I||a===E?P.event.x:P.event.y),e=D(i.invert(t));j(e),x.call("end",r,e),T(e,!0)}));e.append("line").attr("class","track").attr(w+"1",i.range()[0]-C).attr("stroke","#bbb").attr("stroke-width",6).attr("stroke-linecap","round"),e.append("line").attr("class","track-inset").attr(w+"1",i.range()[0]-C).attr("stroke","#eee").attr("stroke-width",4).attr("stroke-linecap","round"),e.append("line").attr("class","track-overlay").attr(w+"1",i.range()[0]-C).attr("stroke","transparent").attr("stroke-width",40).attr("stroke-linecap","round").merge(r.select(".track-overlay"));var n=e.append("g").attr("class","parameter-value").attr("transform",A(i(l))).attr("font-family","sans-serif").attr("text-anchor",a===G?"start":a===J?"end":"middle");n.append("path").attr("transform","rotate("+90*(a+1)+")").attr("d",d).attr("fill","white").attr("stroke","#777"),u&&n.append("text").attr("font-size",10).attr(q,27*b).attr("dy",a===E?"0em":a===I?".71em":".32em").text(g(l)),t.select(".track").attr(w+"2",i.range()[1]+C),t.select(".track-inset").attr(w+"2",i.range()[1]+C),t.select(".track-overlay").attr(w+"2",i.range()[1]+C),t.select(".axis").call(F(i).tickFormat(g).ticks(h).tickValues(m)),k.select(".axis").select(".domain").remove(),t.select(".axis").attr("transform",z(7*b)),t.selectAll(".axis text").attr("fill","#aaa").attr(q,20*b).attr("dy",a===E?"0em":a===I?".71em":".32em").attr("text-anchor",a===G?"start":a===J?"end":"middle"),t.selectAll(".axis line").attr("stroke","#aaa"),t.select(".parameter-value").attr("transform",A(i(l))),M(),V=k.select(".parameter-value text"),L=k.select(".parameter-value")}function M(){if(u){var e=[];k.selectAll(".axis .tick").each(function(t){e.push(Math.abs(t-l))});var r=B.scan(e);k.selectAll(".axis .tick text").attr("opacity",function(t,e){return e===r?0:1})}}function D(e){if(f){var t=(e-s[0])%f,r=e-t;return f<2*t&&(r+=f),e instanceof Date?new Date(r):r}if(p){var n=B.scan(p.map(function(t){return Math.abs(e-t)}));return p[n]}return e}function T(t,e){l!==t&&(l=t,e&&x.call("onchange",n,t),M())}function j(t,e){(e=void 0!==e&&e)?L.transition().ease(_.easeQuadOut).duration(Q).attr("transform",A(i(t))):L.attr("transform",A(i(t))),u&&V.text(v(t))}return n.min=function(t){return arguments.length?(s[0]=t,n):s[0]},n.max=function(t){return arguments.length?(s[1]=t,n):s[1]},n.domain=function(t){return arguments.length?(s=t,n):s},n.width=function(t){return arguments.length?(c=t,n):c},n.height=function(t){return arguments.length?(o=t,n):o},n.tickFormat=function(t){return arguments.length?(g=t,n):g},n.displayFormat=function(t){return arguments.length?(v=t,n):v},n.ticks=function(t){return arguments.length?(h=t,n):h},n.value=function(t){if(!arguments.length)return l;var e=y(i(t)),r=D(i.invert(e));return j(r,!0),T(r,!0),n},n.silentValue=function(t){if(!arguments.length)return l;var e=y(i(t)),r=D(i.invert(e));return j(r,!1),T(r,!1),n},n.default=function(t){return arguments.length?(l=e=t,n):e},n.step=function(t){return arguments.length?(f=t,n):f},n.tickValues=function(t){return arguments.length?(m=t,n):m},n.marks=function(t){return arguments.length?(p=t,n):p},n.handle=function(t){return arguments.length?(d=t,n):d},n.displayValue=function(t){return arguments.length?(u=t,n):u},n.on=function(){var t=x.on.apply(x,arguments);return t===x?n:t},n}t.sliderHorizontal=function(t){return e(I,t)},t.sliderVertical=function(t){return e(J,t)},t.sliderTop=function(t){return e(E,t)},t.sliderRight=function(t){return e(G,t)},t.sliderBottom=function(t){return e(I,t)},t.sliderLeft=function(t){return e(J,t)},Object.defineProperty(t,"__esModule",{value:!0})});